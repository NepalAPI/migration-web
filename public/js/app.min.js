$(function(){$("select").select2({placeholder:"Select",allowClear:!0,theme:"classic"}),$("#tags").select2({placeholder:"Select",allowClear:!0,theme:"classic",tags:!0}),tinymce.init({selector:"textarea",theme:"modern",width:700,height:300,browser_spellcheck:!0,fontsize_formats:"8pt 10pt 12pt 14pt 16pt 18pt 20pt 24pt 36pt",plugins:["advlist autolink link image lists charmap  hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking","save table contextmenu directionality template paste textcolor colorpicker"],content_css:"css/content.css",toolbar:"insertfile undo redo | styleselect | fontsizeselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image |  media fullpage | forecolor backcolor"}),$(document).on("change","#post_type",function(){$(".content-type").hide();var t=$(this).val();$(".type-"+t).show()}),$(document).on("click",".post_type",function(){$(".content-type").hide(),$(this).parent().siblings().removeClass("active"),$(this).parent().addClass("active");var t=$(this).data("post-type");$(".post_type_value").val(t),$(".type-"+t).show()}),$(document).on("click",".delete",function(t){t.preventDefault(),$(this).parent().remove()});var t=40,e=function(){var t=0;return $(".list li").each(function(){var e=$(this).outerWidth();t+=e}),t},i=function(){return $(".wrapper").outerWidth()-e()-n()-t},n=function(){return $(".list").position().left},o=function(){$(".wrapper").outerWidth()<e()?$(".scroller-right").show():$(".scroller-right").hide(),n()<0?$(".scroller-left").show():($(".item").animate({left:"-="+n()+"px"},"slow"),$(".scroller-left").hide())};o(),$(window).on("resize",function(t){o()}),$(".scroller-right").click(function(){$(".scroller-left").fadeIn("slow"),$(".scroller-right").fadeOut("slow"),$(".list").animate({left:"+="+i()+"px"},"slow",function(){})}),$(".scroller-left").click(function(){$(".scroller-right").fadeIn("slow"),$(".scroller-left").fadeOut("slow"),$(".list").animate({left:"-="+n()+"px"},"slow",function(){})})});var changePosition=function(t){$.ajax({url:"/sort",type:"POST",data:t,success:function(t){t.success?App.notify.success("Saved!"):App.notify.validationError(t.errors)},error:function(){App.notify.danger("Something wrong!")}})};$(document).ready(function(){var t=$(".sortable");t.length>0&&t.sortable({handle:".sortable-handle",axis:"y",update:function(t,e){var i=$(this).data("entityname"),n=e.item,o=n.prev(),a=n.next();o.length>0?changePosition({parentId:n.data("parentid"),type:"moveAfter",entityName:i,id:n.data("itemid"),positionEntityId:o.data("itemid")}):a.length>0?changePosition({parentId:n.data("parentid"),type:"moveBefore",entityName:i,id:n.data("itemid"),positionEntityId:a.data("itemid")}):App.notify.danger("Something wrong!")},cursor:"move"}),$(".sortable td").each(function(){$(this).css("width",$(this).width()+"px")})});